<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blunder Fix â€¢ Analyze</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app-wrap" data-page="analyze">
      <header class="topbar">
        <div class="brand">
          <span class="brand-mark">BF</span>
          <div>
            <h1>Analyze Games</h1>
            <p>Step 2 of 3</p>
          </div>
        </div>
        <nav class="nav-pill">
          <a href="./import.html">Import</a>
          <a class="active" href="./analyze.html">Analyze</a>
          <a href="./review.html">Review</a>
          <a href="./stats.html">Stats</a>
        </nav>
      </header>

      <section class="glass-panel">
        <h2>Analysis Controls</h2>
        <div class="row analyze-user-row">
          <label>Username
            <select id="userSelectAnalyze"></select>
          </label>
          <button id="analyzeSettingsBtn" class="icon-btn" aria-label="Analyze settings" title="Analyze settings">&#9881;</button>
        </div>
        <div class="row wrap analyze-controls-row">
          <label class="severity-filter">Include
            <span class="severity-options">
              <label class="severity-chip severity-chip--inaccuracy"><input id="analyzeShowInaccuracy" type="checkbox" /><span>Inaccuracy</span></label>
              <label class="severity-chip severity-chip--mistake"><input id="analyzeShowMistake" type="checkbox" /><span>Mistake</span></label>
              <label class="severity-chip severity-chip--blunder"><input id="analyzeShowBlunder" type="checkbox" checked /><span>Blunder</span></label>
            </span>
          </label>
        </div>
        <p id="analyzeStatus" class="status">Idle</p>
        <p id="engineStatus" class="status">Stockfish: idle.</p>
        <div class="row analyze-actions-row">
          <button id="analyzeBtn">Analyze</button>
          <button id="resetAnalyzeBtn" class="danger-btn">Clear Analysis Data</button>
        </div>
      </section>

      <div id="analyzeSettingsOverlay" class="settings-overlay" hidden>
        <div id="analyzeSettingsBackdrop" class="settings-backdrop"></div>
        <section class="settings-panel" role="dialog" aria-modal="true" aria-labelledby="analyzeSettingsTitle">
          <div class="settings-head">
            <h2 id="analyzeSettingsTitle">Analysis Settings</h2>
            <button id="analyzeSettingsClose" class="icon-btn" aria-label="Close settings" title="Close">&#10005;</button>
          </div>
          <div class="settings-grid">
          <label>Depth
            <input id="depth" type="range" value="10" min="4" max="24" step="1" />
            <span class="slider-value" id="depthValue">10</span>
          </label>
          <label>Number of Lines
            <input id="multipv" type="range" value="4" min="1" max="12" step="1" />
            <span class="slider-value" id="multipvValue">4</span>
          </label>
          <label>Skip Opening Moves
            <input id="openingSkip" type="range" value="8" min="0" max="40" step="1" />
            <span class="slider-value" id="openingSkipValue">8</span>
          </label>
          <label>Accept Window (cp)
            <input id="cpWindow" type="range" value="30" min="0" max="300" step="5" />
            <span class="slider-value" id="cpWindowValue">30</span>
          </label>
        </div>
        </section>
      </div>

      <div id="analyzeClearOverlay" class="settings-overlay" hidden>
        <div id="analyzeClearBackdrop" class="settings-backdrop"></div>
        <section class="confirm-panel" role="dialog" aria-modal="true" aria-labelledby="analyzeClearTitle">
          <h2 id="analyzeClearTitle">Clear Analysis Data?</h2>
          <p>This removes all analyzed positions and cards for the selected profile.</p>
          <div class="confirm-actions">
            <button id="analyzeClearCancel">Cancel</button>
            <button id="analyzeClearConfirm" class="danger-btn">Clear</button>
          </div>
        </section>
      </div>

      <section class="glass-panel">
        <h2>Imported Profiles</h2>
        <div id="userCards" class="profiles-grid"></div>
      </section>

    </main>
    <script type="module" src="./app.js"></script>
  </body>
</html>
